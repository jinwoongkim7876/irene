<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>


    <script src="components/scatterplot.js"></script>
    <script src="components/histogram.js"></script>
    <script src="components/pc.js"></script>
    <script src="components/datatable.js"></script>
    <script src="components/histogramRange.js"></script>
    <script src="components/linegraph.js"></script>
    <script src="components/mouseover.js"></script>
    <title>population in korea</title>
    <style>
        body {
            background: #eee;
            overflow-y: scroll;
        }

        .container {
            width: 1400px;
            background: white;
        }

        .brushed {
            stroke-width: 1;
            stroke: gray;
            r: 5;
        }
    </style>
</head>

<body>
    <header>
        <nav class="container navbar navbar-light bg-light">
            <div class="container-fluid">
                <span class="navbar-brand mb-0 h1">Population in KOREA</span>
            </div>
        </nav>

    </header>
    
    <main class="container pb-3">
        
        <div class="row pt-2">
            <div class="col-1 text-end pe-2"><strong>Age : </strong></div>
            <div class="col-11">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="0~9" id="x0"
                        checked>
                    <label class="form-check-label" for="x0">0~9</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="10~19" id="x1" checked>
                    <label class="form-check-label" for="x1">10~19</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="20~29" id="x2">
                    <label class="form-check-label" for="x2">20~29</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="30~39" id="x3">
                    <label class="form-check-label" for="x3">30~39</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="40~49" id="x4">
                    <label class="form-check-label" for="x4">40~49</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="50~59" id="x5">
                    <label class="form-check-label" for="x5">50~59</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="60~69" id="x6">
                    <label class="form-check-label" for="x6">60~69</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="70~79" id="x7">
                    <label class="form-check-label" for="x7">70~79</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="80~89" id="x8">
                    <label class="form-check-label" for="x8">80~89</label>
                </div>                                                                                                                
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="90~99" id="x9">
                    <label class="form-check-label" for="x9">90~99</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="y-encoding" value="100~" id="x10">
                    <label class="form-check-label" for="x10">100~</label>
                </div>
            </div>
        </div>
        <div class="row pt-2">
            <div class="col-1 text-end pe-2"><strong>Year : </strong></div>
            <div class="col-11">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="0" id="2012"
                        checked>
                    <label class="form-check-label" for="2012">2012</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="1" id="2013">
                    <label class="form-check-label" for="2013">2013</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="2" id="2014">
                    <label class="form-check-label" for="2014">2014</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="3" id="2015">
                    <label class="form-check-label" for="2015">2015</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="4" id="2016">
                    <label class="form-check-label" for="2016">2016</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="5" id="2017">
                    <label class="form-check-label" for="2017">2017</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="6" id="2018">
                    <label class="form-check-label" for="2018">2018</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="7" id="2019">
                    <label class="form-check-label" for="2019">2019</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="8" id="2020">
                    <label class="form-check-label" for="2020">2020</label>
                </div>                                                                                                                
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="9" id="2021">
                    <label class="form-check-label" for="2021">2021</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="10" id="2022">
                    <label class="form-check-label" for="2022">2022</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="z-encoding" value="11" id="2023" checked>
                    <label class="form-check-label" for="2023">2023</label>
                </div>                
            </div>
        </div>        
        <div class="row">
            <div class="col-1 text-end pe-2"><strong>Region:</strong></div>
            <div class="col-11">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="seoul" id="seoul" checked>
                    <label class="form-check-label" for="seoul">서울</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="busan" id="busan" >
                    <label class="form-check-label" for="busan">부산</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="daegu" id="daegu" checked>
                    <label class="form-check-label" for="daegu">대구</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="incheon" id="incheon">
                    <label class="form-check-label" for="incheon">인천</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="kwangju" id="kwangju">
                    <label class="form-check-label" for="kwangju">광주</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="daejeon" id="daejeon">
                    <label class="form-check-label" for="daejeon">대전</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="ulsan" id="ulsan">
                    <label class="form-check-label" for="ulsan">울산</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="sejong" id="sejong">
                    <label class="form-check-label" for="sejong">세종</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="kyeonggi" id="kyeonggi">
                    <label class="form-check-label" for="kyeonggi">경기</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="kangwon" id="kangwon">
                    <label class="form-check-label" for="kangwon">강원</label>
                </div>     
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="chungbuk" id="chungbuk">
                    <label class="form-check-label" for="chungbuk">충북</label>
                </div>   
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="chungnam" id="chungnam">
                    <label class="form-check-label" for="chungnam">충남</label>
                </div>   
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="jeonbuk" id="jeonbuk">
                    <label class="form-check-label" for="jeonbuk">전북</label>
                </div>   
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="jeonnam" id="jeonnam">
                    <label class="form-check-label" for="jeonnam">전남</label>
                </div>   
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="kyungbuk" id="kyungbuk">
                    <label class="form-check-label" for="kyungbuk">경북</label>
                </div>   
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="kyungnam" id="kyungnam">
                    <label class="form-check-label" for="kyungnam">경남</label>
                </div>    
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="checkbox" name="x-encoding" value="jeju" id="jeju">
                    <label class="form-check-label" for="jeju">제주</label>
                </div>                                                                                                                                                                                                            
            </div>
        </div>
        <div class="text-center">
            <svg width="400" height="400" id="histogramRange">
            </svg>
            <svg width="400" height="400" id="histogram">
            </svg>
            <svg width="400" height="400" id="linegraph">
            </svg>        
            <svg width="400" height="400" id="data-table">
            </svg>                  
        </div>
    </main>

    <script>
        let data, histogram, dataTable, histogramRange;
        let linegraph;

        function updateHistogram() {
            let xVar = d3.selectAll("input[type=checkbox][name=x-encoding]:checked")
            .nodes()
            .map(cb => cb.value);
            let zVar = d3.select("input[type=radio][name=z-encoding]:checked").property("value");

            histogram.update(data, xVar, zVar);
        }
        function updatelinegraph() {
            let xVar = d3.selectAll("input[type=checkbox][name=x-encoding]:checked")
            .nodes()
            .map(cb => cb.value);
            let yVar = d3.select("input[type=radio][name=y-encoding]:checked").property("value");

            linegraph.update(data, xVar, yVar);
        }    
        function updateHistogramRange() {
            let xVar = d3.selectAll("input[type=checkbox][name=x-encoding]:checked")
            .nodes()
            .map(cb => cb.value);
            let yVar = d3.select("input[type=radio][name=y-encoding]:checked").property("value");
            let zVar = d3.select("input[type=radio][name=z-encoding]:checked").property("value");   

            histogramRange.update(data,xVar, yVar, zVar);
            
        }        

        function updateDataTable() {
            dataTable.update(data, data.columns)
        }

        Promise.all([
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2012_population.csv"),    
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2013_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2014_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2015_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2016_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2017_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2018_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2019_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2020_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2021_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2022_population.csv"),   
            d3.csv("https://raw.githubusercontent.com/jinwoongkim7876/irene/main/2023_population.csv")   
        ]).then(csvData => {
                csvData.forEach(row => {
                  
                    row.forEach(d => {                       
                        d["0~9"] = +d["0~9"];
                        d["10~19"] = +d["10~19"];
                        d["20~29"] = +d["20~29"];
                        d["30~39"] = +d["30~39"];
                        d["40~49"] = +d["40~49"];
                        d["50~59"] = +d["50~59"];
                        d["60~69"] = +d["60~69"];
                        d["70~79"] = +d["70~79"];
                        d["80~89"] = +d["80~89"];
                        d["90~99"] = +d["90~99"];
                        d["100~"] = +d["100~"];                                                                                                                            
                })
            });          
                data = csvData;

                d3.selectAll("input[type=checkbox][name=x-encoding]")
                .on("change", function(){updateHistogram();updatelinegraph();updateHistogramRange();})
                d3.selectAll("input[type=radio][name=z-encoding]")
                .on("change", function(){updateHistogramRange();updateHistogram();})
                d3.selectAll("input[type=radio][name=y-encoding]")
                .on("change", function(){updateHistogramRange();updatelinegraph();})

                linegraph = new Linegraph("#linegraph");
                histogram = new Histogram("#histogram");
                histogramRange = new HistogramRange("#histogramRange");
                               
                histogramRange.initialize();
                histogram.initialize();
                linegraph.initialize();

                updateHistogram();
                updateHistogramRange();
                updatelinegraph();

                dataTable = new DataTable("#data-table");

                updateDataTable();
            })
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>